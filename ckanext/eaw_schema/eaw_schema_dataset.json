{
  "scheming_version": 1,
  "about": "A reimplementation of the default CKAN dataset schema",
  "about_url": "http://github.com/ckan/ckanext-scheming",
  "dataset_type": "dataset",
  "dataset_fields": [
    {
      "field_name": "__before",
      "validators": "test_before",
      "form_snippet": null,
      "display_snippet": null
    },
    {
      "field_name": "separator_domain_metadata",
      "form_snippet": "eaw_form_separator.html",
      "display_snippet": null,
      "label": "package type"
    },
    {
      "default_value": false,
      "field_name": "ispublication",
      "form_snippet": "eaw_schema_checkbox.html",
      "form_attrs": {
        "data-module": "eaw_schema_subdivs",
        "data-module-divnames_inner": "publicationlink",
        "data-module-divname_outer": "publicationcheck",
        "data-module-names_clearfields": "publicationlink"
      },
      "classes": [
        "publication_element",
        "publicationcheck"
      ],
      "label": "Publication data package?",
      "modal_text": "ispublication_help"
    },
    {
      "form_placeholder": "http://doi.org/10.1016/j.envsoft.2017.03.002",
      "field_name": "publicationlink",
      "form_snippet": "eaw_schema_text.html",
      "form_attrs": {
        "data-module": "eaw_schema_checkpublication"
      },
      "classes": [
        "publication_element",
        "publicationlink"
      ],
      "validators": "eaw_schema_publicationlink",
      "label": "DORA-Id or DOI, if available",
      "modal_text": "publicationlink_help"
    },
    {
      "default_value": true,
      "field_name": "open_data",
      "form_snippet": "eaw_schema_checkbox.html",
      "form_attrs": {
        "data-module": "eaw_schema_subdivs",
        "data-module-divnames_inner": "open_data_embargo",
        "data-module-divname_outer": "open_data_check",
        "data-module-names_clearfields": "embargo"
      },
      "classes": [
        "open_data_element",
        "open_data_check"
      ],
      "label": "Open Data?",
      "modal_text": "open_data_help"
    },
    {
      "display_snippet": "text.html",
      "output_validators": "eaw_schema_striptime",
      "form_snippet": "eaw_schema_date.html",
      "classes": [
        "open_data_element",
        "open_data_embargo"
      ],
      "validators": "scheming_required isodate eaw_schema_embargodate",
      "label": "Embargo",
      "modal_text": "embargo_help",
      "field_name": "embargo"
    },
    {
      "field_name": "separator_domain_metadata",
      "form_snippet": "eaw_form_separator.html",
      "display_snippet": null,
      "label": "bibliographic metadata"
    },
    {
      "display_property": "dct:title",
      "form_placeholder": "A descriptive title",
      "field_name": "title",
      "required": true,
      "preset": "eaw_schema_title",
      "label": "Title",
      "modal_text": "title_help"
    },
    {
      "display_property": "dcat:landingPage",
      "preset": "dataset_slug",
      "label": "URL",
      "field_name": "name",
      "required": true
    },
    {
      "form_placeholder": "Bach, Johann <joe@eawag.ch>",
      "form_blanks": 3,
      "default_value": "context_fullname_email",
      "output_validators": "repeating_text_output",
      "required": true,
      "label": "Author",
      "display_snippet": "eaw_repeating_text.html",
      "display_property": "dc:creator",
      "field_name": "author",
      "form_snippet": "eaw_schema_repeating_text_js.html",
      "validators": "repeating_text eaw_schema_json_not_empty",
      "modal_text": "author_help"
    },
    {
      "display_property": "dct:description",
      "form_placeholder": "A description of the package.",
      "field_name": "notes",
      "form_snippet": "eaw_schema_markdown.html",
      "required": true,
      "label": "Abstract",
      "modal_text": "abstract_help"
    },
    {
      "display_property": "dcat:keyword",
      "form_placeholder": "eg. discharge, soil, taxonomy, LC-MS ...",
      "field_name": "tags_string",
      "required": true,
      "form_snippet": "eaw_schema_text.html",
      "form_attrs": {
        "data-module-tags": "",
        "style": "width:97%;",
        "data-module-source": "/api/2/util/tag/autocomplete?incomplete=?",
        "data-module": "eaw_autocomplete",
	"data-module-tokensep": ",;"
      },
      "validators": "scheming_required tag_string_convert",
      "label": "Keywords",
      "modal_text": "keywords_help"
    },
    {
      "field_name": "separator_domain_metadata",
      "form_snippet": "eaw_form_separator.html",
      "display_snippet": null,
      "label": "domain specific metadata"
    },
    {
      "default_value": "none",
      "sorted_choices": true,
      "preset": "eaw_multiple_select_js",
      "field_name": "variables",
      "choices": [
        {
          "label": "alkalinity",
          "value": "alkalinity"
        },
        {
          "label": "degradation rate",
          "value": "degradation_rate"
        },
        {
          "label": "discharge",
          "value": "discharge"
        },
        {
          "label": "electric conductivity",
          "value": "electric_conductivity"
        },
        {
          "label": "concentration",
          "value": "concentration"
        },
        {
          "label": "precipitation",
          "value": "precipitation"
        },
        {
          "label": "pressure",
          "value": "pressure"
        },
        {
          "label": "respiration",
          "value": "respiration"
        },
        {
          "label": "temperature",
          "value": "temperature"
        },
        {
          "label": "turbidity",
          "value": "turbidity"
        },
        {
          "label": "pH",
          "value": "pH"
        },
        {
          "label": "none",
          "value": "none"
        },
        {
          "label": "Secci depth",
          "value": "secci_depth"
        },
        {
          "label": "length",
          "value": "length"
        },
        {
          "label": "weight",
          "value": "weight"
        },
        {
          "label": "total hardness",
          "value": "total_hardness"
        },
        {
          "label": "count",
          "value": "count"
        },
        {
          "label": "water level",
          "value": "waterlevel"
        },
        {
          "label": "velocity",
          "value": "velocity"
        }
      ],
      "form_attrs": {
        "style": "width:90%;"
      },
      "required": true,
      "label": "Variables",
      "modal_text": "variables_help",
      "select_size": 5
    },
    {
      "form_placeholder": "CV 399 (NXFQWRWXEYTOTK-UHFFFAOYSA-N)\nAzimsulfuron (MAHPNPYYQAIOJN-UHFFFAOYSA-N)",
      "display_snippet": "eaw_schema_multiple_string_display.html",
      "validators": "ignore_missing eaw_schema_multiple_string_convert(textbox)",
      "output_validators": "eaw_schema_multiple_string_output",
      "form_snippet": "eaw_schema_multiple_string_textbox.html",
      "form_attrs": {
        "class": "eaw_with_infobutton"
      },
      "required": false,
      "label": "Substances\n(scientific names)",
      "modal_text": "substances_help",
      "field_name": "substances"
    },
    {
	"form_placeholder": "herbicide\nmetabolites\nnutrients\norganic matter\nmicroplastics",
      "display_snippet": "eaw_schema_multiple_string_display.html",
      "validators": "ignore_missing eaw_schema_multiple_string_convert(textbox)",
      "output_validators": "eaw_schema_multiple_string_output",
      "form_snippet": "eaw_schema_multiple_string_textbox.html",
      "form_attrs": {
        "class": "eaw_with_infobutton"
      },
      "required": false,
      "label": "Substances (generic terms)",
      "modal_text": "substances_generic_help",
      "field_name": "substances_generic"
    },
    {
      "form_placeholder": "Dictyosphaerium libertatis\nNodularia moravica\nPhodopus sungorus\nSolanum tuberosum",
      "display_snippet": "eaw_schema_multiple_string_display.html",
      "validators": "ignore_missing eaw_schema_multiple_string_convert(textbox)",
      "output_validators": "eaw_schema_multiple_string_output",
      "form_snippet": "eaw_schema_multiple_string_textbox.html",
      "form_attrs": {
        "class": "eaw_with_infobutton"
      },
      "required": false,
      "label": "Taxa (scientific names)",
      "modal_text": "taxa_help",
      "field_name": "taxa"
    },
    {
      "form_placeholder": "fish\nalgae\ninvertebrates\nbeetles",
      "display_snippet": "eaw_schema_multiple_string_display.html",
      "validators": "ignore_missing eaw_schema_multiple_string_convert(textbox)",
      "output_validators": "eaw_schema_multiple_string_output",
      "form_snippet": "eaw_schema_multiple_string_textbox.html",
      "form_attrs": {
        "class": "eaw_with_infobutton"
      },
      "required": false,
      "label": "Organisms (generic terms)",
      "modal_text": "taxa_generic_help",
      "field_name": "taxa_generic"
    },
    {
      "form_placeholder": "river\nlake\nsewage system\nmetropolitan area\nlab",
      "display_snippet": "eaw_schema_multiple_string_display.html",
      "validators": "ignore_missing eaw_schema_multiple_string_convert(textbox)",
      "output_validators": "eaw_schema_multiple_string_output",
      "form_snippet": "eaw_schema_multiple_string_textbox.html",
      "form_attrs": {
        "class": "eaw_with_infobutton"
      },
      "required": false,
      "label": "Systems",
      "modal_text": "systems_help",
      "field_name": "systems"
    },
    {
      "form_placeholder": "2016-03 TO 2016-05",
      "form_blanks": 1,
      "validators": "repeating_text eaw_schema_json_not_empty vali_daterange",
      "output_validators": "repeating_text_output output_daterange",
      "form_snippet": "eaw_schema_repeating_text_js.html",
      "modal_text": "timerange_help",
      "required": true,
      "label": "Timerange",
      "display_snippet": "eaw_schema_multiple_string_display.html",
      "default_value": "*",
      "field_name": "timerange"
    },
    {
      "form_placeholder": "{\"type\": \"Point\", \"coordinates\": [8.6124600, 47.4031100]}",
      "display_snippet": null,
      "default_value": "{}",
      "field_name": "spatial",
      "form_snippet": "text_medium.html",
      "required": true,
      "label": "Spatial Extent",
      "modal_text": "spatial_help"
    },
    {
      "form_placeholder": "Greifensee\nRiver Rhine\nKampala, Uganda\n",
      "display_snippet": "eaw_schema_multiple_string_display.html",
      "validators": "ignore_missing eaw_schema_multiple_string_convert(textbox)",
      "output_validators": "eaw_schema_multiple_string_output",
      "form_snippet": "eaw_schema_multiple_string_textbox.html",
      "form_attrs": {
        "class": "eaw_with_infobutton"
      },
      "required": false,
      "label": "Geographic Name(s)",
      "modal_text": "geographic-name_help",
      "field_name": "geographic_name"
    },
    {
      "field_name": "separator_domain_metadata",
      "form_snippet": "eaw_form_separator.html",
      "display_snippet": null,
      "label": "package status & usage"
    },
    {
      "field_name": "owner_org",
      "required": true,
      "modal_text_visibility": "visibility_help",
      "modal_text_organization": "organization_help",
      "preset": "eaw_schema_dataset_organization",
      "label": "Organization"
    },
    {
      "display_property": "adms:status",
      "choices": [
        {
          "label": "incomplete",
          "value": "incomplete"
        },
        {
          "label": "complete",
          "value": "complete"
        }
      ],
      "field_name": "status",
      "required": true,
      "form_attrs": {
        "class": "medinput"
      },
      "preset": "select_short",
      "label": "Status",
      "modal_text": "status_help"
    },
    {
      "field_name": "review_level",
      "preset": "select_short",
      "validators": "scheming_required",
      "required": true,
      "default_value": "none",
      "choices": [
	{
	  "value": "none",
	  "label": "none"
	},
	{
	  "value": "general",
	  "label": "general"
	},
	{
	  "value": "domain",
	  "label": "domain specific"
	}
      ],
      "label": "Review Level",
      "form_attrs": {
	"style": "width:270px;"
      },
      "modal_text": "review_level_help"
    },
    {
      "field_name": "reviewed_by",
      "label": "Reviewed By",
      "classes": ["control-full"],
	"form_snippet": "eaw_schema_text.html",
      "validators": "ignore_missing eaw_users_exist eaw_schema_multiple_string_convert(comma)",
      "output_validators": "eaw_schema_list_to_commasepstring_output",
      "form_placeholder": "Start typing name or email of ERIC user ...",
      "display_snippet": "eaw_fullname_email.html",
      "form_attrs": {
	"style": "width:270px;",
	"data-module": "eaw_autocomplete",
	"data-module-tokensep": "[,;",
	"data-module-label": "fullname",
	"data-module-key": "name",
	"data-module-tags": true,
	"data-module-source": "/api/2/util/user/autocomplete?q=?"
      }
    },
    {
      "display_property": "datacite:datacurator",
      "default_value": "context_username",
      "field_name": "maintainer",
      "label": "Curator",
      "modal_text": "curator_help",
      "required": true,
      "form_snippet": "eaw_schema_text.html",
      "display_snippet": "eaw_fullname_email.html",
      "validators": "scheming_required eaw_users_exist",
      "form_attrs": {
	"style": "width:97%;",
	"data-module": "eaw_autocomplete",
	"data-module-label": "fullname",
	"data-module-key": "name",
	"data-module-source": "/api/2/util/user/autocomplete?q=?"
      }
    },
    {
      "display_property": "datacite:datacurator",
      "default_value": "context_username",
      "field_name": "usage_contact",
      "label": "Usage Contact",
      "modal_text": "usage_contact_help",
      "required": true,
      "form_snippet": "eaw_schema_text.html",
      "display_snippet": "eaw_fullname_email.html",
      "validators": "scheming_required eaw_users_exist",
      "form_attrs": {
	"style": "width:97%;",
	"data-module": "eaw_autocomplete",
	"data-module-label": "fullname",
	"data-module-key": "name",
	"data-module-source": "/api/2/util/user/autocomplete?q=?"
      }
    },
    {
      "display_property": "dct:description",
      "form_placeholder": "Additional notes for data users, the Eawag data-manager, or yourself.",
      "field_name": "notes-2",
      "form_snippet": "eaw_schema_markdown.html",
      "required": false,
      "label": "Notes",
      "modal_text": "notes_help"
    }
  ],
  "resource_fields": [
    {
      "preset": "resource_url_upload",
      "label": "URL",
      "field_name": "url"
    },
    {
      "form_placeholder": "filename.csv",
      "field_name": "name",
      "required": true,
      "form_snippet": "eaw_schema_text.html",
      "label": "Name",
      "modal_text": "res_name_help",
      "form_attrs": {
	"data-module": "eaw_copyname",
	"data-module-sourcefieldid": "field-image-url"
      }
    },
    {
      "field_name": "resource_type",
      "required": true,
      "label": "Resource Type",
      "preset": "select_short",
      "choices": [
        {
          "label": "Dataset",
          "value": "Dataset"
        },
        {
          "label": "Collection",
          "value": "Collection"
        },
        {
          "label": "Text",
          "value": "Text"
        },
        {
          "label": "Image",
          "value": "Image"
        },
        {
          "label": "Audiovisual",
          "value": "Audiovisual"
        },
        {
          "label": "Software",
          "value": "Software"
        },
        {
          "label": "Sound",
          "value": "Sound"
        },
        {
          "label": "Geospatial Data",
          "value": "GeospatialData"
        },
        {
          "label": "Model",
          "value": "Model"
        },
        {
          "label": "Event",
          "value": "Event"
        },
        {
          "label": "Interactive Resource",
          "value": "InteractiveResource"
        },
        {
          "label": "Physical Object",
          "value": "PhysicalObject"
        },
        {
          "label": "Service",
          "value": "Service"
        },
        {
          "label": "Workflow",
          "value": "Workflow"
        },
        {
          "label": "Other",
          "value": "Other"
        }
      ],
      "modal_text": "resource_type_help"
    },
    {
      "field_name": "restricted_level",
      "label": "Restriction",
      "preset": "select",
      "required": true,
      "choices": [
	{
	  "value": "public",
	  "label": "Public"
	},
	{
	  "value": "same_organization",
	  "label": "Same organization members"
	},
	{
	  "value": "only_allowed_users",
	  "label": "Allowed users only"
	}
      ]
    },
    {
      "field_name": "allowed_users",
      "label": "Allowed Users",
      "classes": ["control-full"],
      "form_snippet": "eaw_schema_text.html",
      "validators": "ignore_missing eaw_users_exist eaw_schema_multiple_string_convert(comma)",
      "output_validators": "eaw_schema_list_to_commasepstring_output",
      "form_attrs": {
	"data-module": "eaw_autocomplete",
	"data-module-tokensep": "[,;",
	"data-module-label": "fullname",
	"data-module-key": "name",
	"data-module-tags": true,
	"data-module-source": "/api/2/util/user/autocomplete?q=?"
      }
    }
  ]
}
